<!--index.wxml-->
<wxs src="./../../wxs/utils.wxs" module="tools" />

<view class="container">
  <view class="banner">
    <image class="banner-img" src="../../images/index_bg.png"></image>
  </view>
  <view class="notice-wrap" wx:if="{{noticeList.length > 0}}">
  <swiper class="notice-swiper" circular="true" autoplay="true" duration="500" vertical="true" interval="2000">
    <swiper-item wx:for="{{noticeList}}" wx:key="item.noticeid">
      <view class="one-notice" bindtap="goNoticeDetail" data-noticeid="{{item.noticeid}}">
        <view class="btn">公告</view>
        <view class="label">{{item.title}}</view>
      </view>
    </swiper-item>
  </swiper>
  </view>
  <view class="thing-wrap">
    <view class="one-card" wx:for="{{itemList}}" wx:key="item.tid" >
      <view class="top" bindtap="goDetail" data-tid="{{item.tid}}"  data-idx="{{index}}">
        <view class="left">
          <image class="header-img" src="{{item.wechatheader}}"></image>
        </view>
        <view class="right">
          <view class="name">{{item.wechatnick}}<view class="label utag" wx:if="{{item.personaltag}}">{{item.personaltag}}</view></view>
          <view class="time">{{tools.formatTime(item.updatetime)}}</view>
        </view>
      </view>
      <view class="middle">
          <view class="title" bindtap="goDetail" data-tid="{{item.tid}}"  data-idx="{{index}}">{{item.name}}</view>
          <view class="content" wx:if="{{item.content.length > 54 && item.showAll == false}}">
            <text bindtap="goDetail" data-tid="{{item.tid}}"  data-idx="{{index}}">{{tools.substr(item.content, 0, 48) + '...'}}</text>
            <view class="span" bindtap="showAll" data-idx="{{index}}" data-tid="{{item.tid}}">全文</view>
          </view>
          <view class="content" wx:else  bindtap="goDetail" data-tid="{{item.tid}}"  data-idx="{{index}}">{{item.content}}</view>
          <!-- <view class="images" wx:if="{{item.imagesList.length == 1}}" catchtap="showImg" data-idx="{{index}}" data-arr="{{item.imagesList}}">
            <image class="card-img" src="{{item.images}}"></image>
          </view> -->
          <view catchtap="showImg" data-idx="{{index}}" data-arr="{{item.imagesList}}" class="images-more">
            <image mode="aspectFill" wx:for="{{item.imagesList}}" wx:for-item="imgItem" wx:for-index="imgIndex" wx:key="imgIndex" class="" src="{{imgItem}}"></image>
          </view>
      </view>
      <view class="function">
        <view class="praise">
          <button class="sharebtn" open-type="share" data-tid="{{item.tid}}"  data-idx="{{index}}">
            <image class="icon" src="../../images/dianzan-14.png"></image>
            <span>分享</span>            
          </button>
        </view>
        <view class="like" wx:if="{{item.likeThisThing}}" bindtap="goLike" data-tid="{{item.tid}}"  data-idx="{{index}}">
          <image class="icon" src="../../images/shoucang1.png"></image>
          <span>喜欢</span>
        </view>
        <view class="like" bindtap="goLike" data-tid="{{item.tid}}"  data-idx="{{index}}" wx:else>
          <image class="icon" src="../../images/shoucang.png"></image>
          <span>喜欢</span>
        </view>
        <view class="praise" bindtap="goPraise" data-tid="{{item.tid}}"  data-idx="{{index}}">
          <image class="icon" src="../../images/dianzan-14.png"></image>
          <span>{{item.praisenum}}</span>
        </view>
        <view class="comment" bindtap="goDetail" data-tid="{{item.tid}}"  data-idx="{{index}}">
          <image class="icon" src="../../images/pinglun-copy.png"></image>
          <span>{{item.commentnum}}</span>
        </view>
      </view>
    </view>
  </view>
</view>
<view class="footer">
  <view bindtap="goIndex">逛逛</view>
  <view class="middle" bindtap="goAddIndex">发帖</view>
  <view bindtap="goMyIndex">我的</view>
</view>

<view class="userinfo" wx:if="{{showGetUserinfo}}">
    <view class="mask"></view>
    <view class="content">
      <view class="title">嗨~ 新的隐藏家，授权登录后方能正常使用哦</view>
      <button  
        open-type="getUserInfo"  
        bindgetuserinfo="onGetUserInfo" 
        class="userinfo-btn"
      >点击授权</button>
    </view>
</view>

<view class="reginfo" wx:if="{{showReg}}">
  <view class="mask"></view>
  <view class="content">
    <view class="p"><text>尊贵的{{userInfo.nickName}}</text></view>
    <view class="p"><text>感谢您接受邀请进入把玩VIP收藏俱乐部，把玩社区属于私密专业型社区。</text></view>
    <view class="p"><text>您会发现，这里是收藏老朋友的聚集地。</text></view>
    <view class="p"><text>我们需要您完善您个人信息，一遍您的朋友更了解您。最后，玩得愉快~</text></view>
    <view class="oneline">
      <text class="text">行业经验<text class="tip">(必填)</text></text>
      <picker class="input" mode="selector" bindchange="selectCHange" value="{{yearIndex}}" range="{{yearArray}}">
        <view class="picker">{{yearArray[yearIndex]}}年经验</view>
      </picker>
    </view>
    <view class="oneline">
      <text class="text">个人签名<text class="tip">(非必填)</text></text>
      <input class="input" bindinput="bindInputSign" maxlength="20" placeholder="认证头衔等，限20字" />
    </view>
    <view class="oneline">
      <text class="text">实体店铺<text class="tip">(必填)</text></text>
      <picker class="input" mode="selector" bindchange="selectCHangeHasShop" value="{{hasShopIndex}}" range="{{hasShopArray}}">
        <view class="picker">{{hasShopArray[hasShopIndex]}}</view>
      </picker>
    </view>
    <view class="oneline">
      <text class="text">实体店铺名称</text>
      <input class="input" bindinput="bindInputShopname" maxlength="30" placeholder="" />
    </view>
    <view class="oneline">
      <text class="text">实体店铺地址</text>
      <picker class="input" mode="region" bindchange="selectChangeShopCity" value="{{shopcityArr}}" custom-item="{{customItem}}">
        <view class="picker">
        {{shopcityArr[0]}}，{{shopcityArr[1]}}，{{shopcityArr[2]}}
        </view>
      </picker>
    </view>
    <view class="oneline">
      <input class="input biginput" bindinput="bindInputShopaddr" maxlength="125" placeholder="店铺街道等详情信息" />
    </view>
    <view>
      <text class="smalltip">*以上信息均公开展示，后续您可在我的页面更新</text>
    </view>
    <view>
      <button bindtap="saveUser" class="save">保存</button>
    </view>
  </view>

</view>

